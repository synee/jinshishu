// Generated by CoffeeScript 1.8.0
(function() {
  angular.module("ngCommunity", []).factory("commentService", function($http, paramsTraditional) {
    return {
      loadComments: function(contentType, contentPk, offset, size) {
        if (offset == null) {
          offset = 0;
        }
        if (size == null) {
          size = 10;
        }
        return $http.get("/comments/" + contentType + "/" + contentPk + "/" + offset + "-" + size);
      },
      postComment: function(contentType, contentPk, comment) {
        return $http.post("/comments/" + contentType + "/" + contentPk, paramsTraditional({
          comment: comment
        }));
      }
    };
  }).directive("comments", function(commentService) {
    return {
      templateUrl: "/static/application/templates/community/comments.html",
      restrict: 'E',
      require: '?ngModel',
      scope: {
        contentType: "@",
        contentPk: "@"
      },
      replace: true,
      transclude: true,
      link: function(scope, element, attrs) {
        commentService.loadComments(scope.contentType, scope.contentPk).success(function(resp) {
          return scope.comments = resp;
        });
        return scope.submit = function() {
          return commentService.postComment(scope.contentType, scope.contentPk, scope.newComment).success(function(resp) {
            scope.newComment = '';
            return scope.comments.push(resp);
          });
        };
      }
    };
  }).directive("tagbar", function($http) {
    return {
      restrict: 'E',
      require: '?ngModel',
      link: function(scope) {
        scope.addTag = function(newTag) {
          return console.log(newTag);
        };
        return scope.addBlur = function() {
          return scope.shownew = false;
        };
      }
    };
  });

}).call(this);

//# sourceMappingURL=community.js.map
